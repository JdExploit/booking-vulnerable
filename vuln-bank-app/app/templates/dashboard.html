{% extends "base.html" %}

{% block title %}Dashboard - {{ username }}{% endblock %}

{% block content %}
    
    {# El código de navegación que tenías en el archivo va en base.html si es común #}

    <div class="container">
        <h2>Account Dashboard</h2>
        
        <div class="account-info">
            {# NOTA: Asumo que la variable pasada es 'user' (como en tu código original) 
               o que estás pasando las variables de sesión directamente como en el app.py corregido (username, user_id, is_admin). 
               Ajusta esto según lo que realmente le pasas desde la función dashboard() en app.py #}
            
            {# Usando variables directamente de la sesión (como en el app.py corregido): #}
            <h3>Balance: $XX,XXX.XX (No disponible en sesión)</h3>
            <p>Account: {{ username }}</p>
            <p>User ID: {{ user_id }}</p>
            <p>Admin Status: {{ is_admin }}</p>
            {# Enlace de prueba para IDOR #}
            <p><a href="/api/users/{{ user_id }}">View Profile (IDOR Test)</a></p>
        </div>
        
        <div class="transfer-form">
            <h3>Transfer Money</h3>
            <form action="/transfer" method="POST">
                <input type="text" name="to_user" placeholder="Recipient Username" required>
                <input type="number" name="amount" placeholder="Amount" step="0.01" required>
                <textarea name="description" placeholder="Description"></textarea>
                <button type="submit">Transfer</button>
            </form>
        </div>
        
        <div class="tools">
            <h3>Banking Tools:</h3>
            <ul>
                <li><a href="/search?q=">Search Users (SQLi)</a></li>
                <li><a href="/fetch?url=http://example.com">Fetch URL (SSRF)</a></li>
                <li><a href="/import_profile">Import Profile (Deserialization)</a></li>
                <li><a href="/ping?host=127.0.0.1">Ping System (CMDi)</a></li>
            </ul>
        </div>
    </div>
{% endblock %}
